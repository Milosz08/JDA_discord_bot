<?xml version="1.0" encoding="UTF-8" ?>

<!--
  ~ Copyright (c) 2023 by MILOSZ GILGA <http://miloszgilga.pl>
  ~
  ~ File name: logback-spring.cfg.xml
  ~ Last modified: 10/04/2023, 23:27
  ~ Project name: jwizard-discord-bot
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
  ~ file except in compliance with the License. You may obtain a copy of the License at
  ~
  ~     <http://www.apache.org/license/LICENSE-2.0>
  ~
  ~ Unless required by applicable law or agreed to in writing, software distributed under
  ~ the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS
  ~ OF ANY KIND, either express or implied. See the License for the specific language
  ~ governing permissions and limitations under the license.
  -->

<configuration>

    <include resource="org/springframework/boot/logging/logback/defaults.xml"/>
    <include resource="logback/logback-file-appenders.cfg.xml"/>
    <include resource="logback/logback-console-appenders.cfg.xml"/>

    <import class="ch.qos.logback.classic.AsyncAppender"/>

    <property name="jdaLogsPath" value="logs/jda-api"/>
    <property name="springLogsPath" value="logs/spring-api"/>
    <property name="hibernateSqlLogsPath" value="logs/hibernate-api"/>
    <property name="appLogsPath" value="logs"/>

    <property name="jdaLogger" value="net.dv8tion.jda"/>
    <property name="commandLogger" value="pl.miloszgilga.command"/>
    <property name="audioplayerLogger" value="pl.miloszgilga.audioplayer"/>
    <property name="exceptionLogger" value="pl.miloszgilga.exception"/>
    <property name="listenerLogger" value="pl.miloszgilga.listener"/>
    <property name="springFrameworkLogger" value="org.springframework"/>
    <property name="logbackLogger" value="ch.qos.logback"/>
    <property name="reflectionsLogger" value="org.reflections.Reflections"/>
    <property name="hibernateSqlLogger" value="org.hibernate.SQL"/>

    <!-- start of async appenders section -->

    <appender name="async.appender.file.info" class="AsyncAppender">
        <appender-ref ref="appender.file.info" />
    </appender>
    <appender name="async.appender.file.warn" class="AsyncAppender">
        <appender-ref ref="appender.file.warn" />
    </appender>
    <appender name="async.appender.file.error" class="AsyncAppender">
        <appender-ref ref="appender.file.error" />
    </appender>
    <appender name="async.appender.file.jda.debug" class="AsyncAppender">
        <appender-ref ref="appender.file.jda.debug" />
    </appender>
    <appender name="async.appender.file.spring.debug" class="AsyncAppender">
        <appender-ref ref="appender.file.spring.debug" />
    </appender>
    <appender name="async.appender.file.hibernate.sql" class="AsyncAppender">
        <appender-ref ref="appender.file.hibernate.sql" />
    </appender>

    <!-- end of async appenders section -->
    <!-- start of applying appenders section  -->

    <springProfile name="dev">
        <logger name="${hibernateSqlLogger}" additivity="false">
            <appender-ref ref="async.appender.file.hibernate.sql"/>
            <appender-ref ref="appender.console.major"/>
        </logger>
    </springProfile>

    <logger name="${jdaLogger}" additivity="false">
        <appender-ref ref="async.appender.file.info"/>
        <appender-ref ref="async.appender.file.warn"/>
        <appender-ref ref="async.appender.file.error"/>
        <appender-ref ref="async.appender.file.jda.debug"/>
        <appender-ref ref="appender.console.major"/>
    </logger>

    <logger name="${commandLogger}" additivity="false">
        <appender-ref ref="appender.file.perf"/>
        <appender-ref ref="appender.console.major"/>
    </logger>

    <logger name="${audioplayerLogger}" additivity="false">
        <appender-ref ref="appender.file.perf"/>
        <appender-ref ref="appender.console.major"/>
    </logger>

    <logger name="${exceptionLogger}" additivity="false">
        <appender-ref ref="appender.file.perf"/>
        <appender-ref ref="appender.console.major"/>
    </logger>

    <logger name="${listenerLogger}" additivity="false">
        <appender-ref ref="appender.file.perf"/>
        <appender-ref ref="appender.console.major"/>
    </logger>

    <logger name="${springFrameworkLogger}" additivity="false">
        <appender-ref ref="async.appender.file.info"/>
        <appender-ref ref="async.appender.file.warn"/>
        <appender-ref ref="async.appender.file.error"/>
        <appender-ref ref="async.appender.file.spring.debug"/>
        <appender-ref ref="appender.console.major"/>
    </logger>

    <logger name="${reflectionsLogger}" additivity="false" level="INFO">
        <appender-ref ref="async.appender.file.info"/>
        <appender-ref ref="async.appender.file.warn"/>
        <appender-ref ref="appender.console.major"/>
    </logger>

    <logger name="${reflectionsLogger}" additivity="false" level="ERROR">
        <appender-ref ref="async.appender.file.error"/>
        <appender-ref ref="appender.console.major"/>
    </logger>

    <root additivity="false">
        <appender-ref ref="async.appender.file.info"/>
        <appender-ref ref="async.appender.file.warn"/>
        <appender-ref ref="async.appender.file.error"/>
        <appender-ref ref="appender.console.major"/>
    </root>

    <!-- end of applying appenders section  -->

</configuration>
